import{d as v,T as h,h as C,o as P,c as _,a as i,r as I,b as p,u as b,F as O,e as E}from"./vendor.af5da208.js";const D=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};D();var L=Object.defineProperty,A=Object.defineProperties,R=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(t,e,n)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c=(t,e)=>{for(var n in e||(e={}))w.call(e,n)&&f(t,n,e[n]);if(u)for(var n of u(e))y.call(e,n)&&f(t,n,e[n]);return t},S=(t,e)=>A(t,R(e)),B=(t,e)=>{var n={};for(var r in t)w.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&u)for(var r of u(t))e.indexOf(r)<0&&y.call(t,r)&&(n[r]=t[r]);return n},U=t=>t?Object.entries(t).reduce((e,[n,r])=>(n=n.charAt(0).toUpperCase()+n.slice(1),n=`on${n}`,S(c({},e),{[n]:r})),{}):null,j=(t,e={},n)=>{const r=e,{props:s,domProps:o,on:a}=r,l=B(r,["props","domProps","on"]);let d=U(a);const x=c(c(c(c({},l),s),o),d);return C(t,x,n)},k=j;function g(t){if(!t.length)return"";const e=t.reduce((n,[r,s],o,a)=>{const[l,d]=a[(o+1)%a.length];return n.push(r,s,(r+l)/2,(s+d)/2),n},["M",...t[0],"Q"]);return e.push("Z"),e.join(" ")}var $="rgba(0,0,0,0)",N="#000",T="100%",F="100%",m=["image/png","image/jpeg","image/svg+xml"],q=v({data:()=>({allInputPoints:[],currentInputPoints:null,isDrawing:!1,cachedImages:[]}),emits:["onBegin","onEnd"],props:{width:{type:String,required:!1,default:T},height:{type:String,required:!1,default:F},backgroundColor:{type:String,required:!1,default:$},penColor:{type:String,required:!1,default:N},strokeOptions:{type:Object,required:!1,default:()=>({})}},methods:{handlePointerDown(t){t.preventDefault();const n=t.composedPath()[0].getBoundingClientRect(),r=t.clientX-n.left,s=t.clientY-n.top;this.currentInputPoints=[[r,s,t.pressure]],this.isDrawing=!0,this.$emit("onBegin",t)},handlePointerMove(t){var e;if(!!this.isDrawing&&t.buttons===1){t.preventDefault();const r=t.composedPath()[0].getBoundingClientRect(),s=t.clientX-r.left,o=t.clientY-r.top;this.currentInputPoints=[...(e=this.currentInputPoints)!=null?e:[],[s,o,t.pressure]]}},handlePointerUp(t){t.preventDefault(),this.isDrawing=!1,this.currentInputPoints&&(this.allInputPoints=[...this.allInputPoints,this.currentInputPoints],this.currentInputPoints=null,this.$emit("onEnd",t))},handlePointerEnter(t){t.buttons===1&&this.handlePointerDown(t)},handlePointerLeave(t){!this.isDrawing||this.handlePointerUp(t)},isEmpty(){return!this.allInputPoints.length&&!this.cachedImages.length},clear(){this.cachedImages=[],this.allInputPoints=[],this.currentInputPoints=null},fromData(t){this.allInputPoints=[...this.allInputPoints,...t]},toData(){return this.allInputPoints},fromDataURL(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{const s=this.getCanvasElement(),o=s.getContext("2d");o==null||o.drawImage(r,0,0,s.width,s.height),this.cachedImages.push(r),e(!0)},r.onerror=()=>{n("Incorrect data uri provided")},r.crossOrigin="anonymous",r.src=t})},toDataURL(t){if(t&&!m.includes(t))throw new Error(`Incorrect image type. Must be one of ${m.join(", ")}.`);return this.isEmpty()?void 0:this.getCanvasElement().toDataURL(t!=null?t:"image/png")},getCanvasElement(){return this.$refs.signaturePad},setBackgroundAndPenColor(){const t=this.getCanvasElement(),e=t.getContext("2d");e.fillStyle=this.backgroundColor,e==null||e.fillRect(0,0,t.width,t.height),e.fillStyle=this.penColor},resizeCanvas(t=!0){const e=this.getCanvasElement(),n=e.getBoundingClientRect(),r=window.devicePixelRatio||1;e.width=n.width*r,e.height=n.height*r;const s=e.getContext("2d");s==null||s.scale(r,r),e.style.width=n.width+"px",e.style.height=n.height+"px",t&&this.clear(),this.setBackgroundAndPenColor()},inputPointsHandler(){const t=this.getCanvasElement(),e=t.getContext("2d");if(e==null||e.clearRect(0,0,t.width,t.height),this.cachedImages.forEach(s=>e==null?void 0:e.drawImage(s,0,0,t.width,t.height)),this.setBackgroundAndPenColor(),this.allInputPoints.forEach(s=>{const o=g(h(s,this.strokeOptions)),a=new Path2D(o);e==null||e.fill(a)}),!this.currentInputPoints)return;const n=g(h(this.currentInputPoints,this.strokeOptions)),r=new Path2D(n);e==null||e.fill(r)}},mounted(){this.resizeCanvas()},watch:{backgroundColor(){this.setBackgroundAndPenColor()},penColor(t){const n=this.getCanvasElement().getContext("2d");n.fillStyle=t},allInputPoints:{deep:!0,handler(){this.inputPointsHandler()}},currentInputPoints:{deep:!0,handler(){this.inputPointsHandler()}}},render(){const{width:t,height:e}=this,n={pointerdown:this.handlePointerDown,pointerup:this.handlePointerUp,pointermove:this.handlePointerMove,pointerenter:this.handlePointerEnter,pointerleave:this.handlePointerLeave};return k("canvas",{ref:"signaturePad",style:{height:e,width:t,touchAction:"none"},on:n})}}),H=q,M=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const V={},G={class:"bg-gray-800"},z=i("div",{class:"max-w-7xl px-6 py-4 mx-auto flex justify-between items-center"},[i("div",{class:"flex items-center justify-between"},[i("div",null,[i("a",{class:"text-2xl font-bold text-white lg:text-3xl hover:text-gray-300",href:"#"},"v-perfect-signature")])]),i("div",null,[i("a",{class:"my-1 text-sm font-medium text-gray-200 hover:text-indigo-400 md:mx-4 md:my-0",href:"https://github.com/wobsoriano/v-perfect-signature"},"Github")])],-1),Y=[z];function K(t,e){return P(),_("nav",G,Y)}var X=M(V,[["render",K]]);const Q={class:"max-w-5xl mx-auto py-6 sm:px-6 lg:px-8"},W={class:"px-4 py-6 sm:px-0"},Z={class:"border-4 border-gray-200 h-64 rounded-lg"},J=v({setup(t){const e={size:8,thinning:.5,smoothing:.5,streamline:.5,last:!0},n=I(),r=()=>{var o;(o=n.value)==null||o.clear()},s=()=>{var a,l;if((a=n.value)!=null&&a.isEmpty()){alert("Empty signature pad!");return}const o=document.createElement("a");o.download="signature.png",o.href=(l=n.value)==null?void 0:l.toDataURL(),document.body.appendChild(o),o.click(),document.body.removeChild(o)};return(o,a)=>(P(),_(O,null,[p(X),i("main",null,[i("div",Q,[i("div",W,[i("div",Z,[p(b(H),{"stroke-options":e,ref_key:"signaturePad",ref:n},null,512)]),i("div",{class:"mt-10 space-x-4 text-center"},[i("button",{onClick:r,class:"clear-btn"}," Clear and draw again "),i("button",{onClick:s,class:"download-btn"}," Download signature ")])])])])],64))}});E(J).mount("#app");
